/**
 * record middleware.
 */
export function records(devServer) {
    const compiler = devServer.getCompiler();
    return async (ctx, next) => {
        if (ctx.path === '/__record/modules') {
            ctx.body = compiler.modules();
            await next();
        }
        else if (ctx.path === '/__record/resolve') {
            const id = ctx.query.id;
            ctx.body = compiler.getResolveRecords(id);
            await next();
        }
        else if (ctx.path === '/__record/transform') {
            const id = ctx.query.id;
            ctx.body = compiler.getTransformRecords(id);
            await next();
        }
        else if (ctx.path === '/__record/process') {
            const id = ctx.query.id;
            ctx.body = compiler.getProcessRecords(id);
            await next();
        }
        else if (ctx.path === '/__record/analyze_deps') {
            const id = ctx.query.id;
            ctx.body = compiler.getAnalyzeDepsRecords(id);
            await next();
        }
        else if (ctx.path === '/__record/resource_pot') {
            const id = ctx.query.id;
            ctx.body = compiler.getResourcePotRecordsById(id);
            await next();
        }
        else if (ctx.path === '/__record/stats') {
            ctx.body = compiler.pluginStats();
            await next();
        }
        else {
            await next();
        }
    };
}
//# sourceMappingURL=records.js.map